{"version":3,"sources":["app.js"],"names":[],"mappings":"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","file":"public/main.js","sourcesContent":["let Sherlock = {\n  init() {\n    this.search = instantsearch({\n      appId: 'O3F8QXYK6R',\n      apiKey: '315734cd612e89d2c548256293799f0c',\n      indexName: 'gutenberg',\n      searchParameters: {\n        distinct: 2\n      }\n    });\n\n    this.addSearchBoxWidget();\n    this.addStatsWidget();\n    this.addClearAllWidget();\n    this.addBookWidget();\n    this.addChapterWidget();\n    this.addHitsWidget();\n    this.addPaginationWidget();\n\n    this.search.start();\n\n    $('#q').focus();\n  },\n  transformHit(data) {\n    console.info(data);\n    // Context\n    let previous = data.context.previous ? data.context.previous.content : null;\n    let next = data.context.next ? data.context.next.content : null;\n\n    // Book and chapter\n    let book = data.book;\n    let chapter = data.chapterName;\n\n    // Content\n    let content = Sherlock.getHighlightedValue(data, 'content');\n\n    return {\n      previous,\n      content,\n      next,\n      book,\n      chapter\n    };\n    // var book = getHighlightedValue(data, 'book');\n    // var chapter = getHighlightedValue(data, 'chapter');\n    // var content = getHighlightedValue(data, 'content');\n    // return {\n    //   book: book,\n    //   chapter: chapter,\n    //   content: content\n    // };\n  },\n  getHighlightedValue(object, property) {\n    if (!_.has(object, `_highlightResult.${property}.value`)) {\n      console.info(object, property);\n      return object[property];\n    }\n    return object._highlightResult[property].value;\n  },\n  addSearchBoxWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.searchBox({\n        container: '#q',\n        placeholder: 'Search in all Sherlock Holmes books'\n      })\n    );\n  },\n  addStatsWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.stats({\n        container: '#stats'\n      })\n    );\n  },\n  addClearAllWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.clearAll({\n        container: '#clear-all',\n        templates: {\n          link: '<i class=\"fa fa-eraser\"></i> Clear all filters'\n        },\n        cssClasses: {\n          root: 'btn btn-block btn-default'\n        },\n        autoHideContainer: true\n      })\n    );\n  },\n  addBookWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.refinementList({\n        container: '#books',\n        attributeName: 'book',\n        operator: 'or',\n        limit: 10\n      })\n    );\n  },\n  addChapterWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.refinementList({\n        container: '#chapters',\n        attributeName: 'chapterName',\n        operator: 'or',\n        limit: 8\n      })\n    );\n  },\n  addHitsWidget() {\n    let hitTemplate = $('#hitTemplate').html();\n    let emptyTemplate = $('#noResultsTemplate').html();\n    this.search.addWidget(\n      instantsearch.widgets.hits({\n        container: '#hits',\n        hitsPerPage: 40,\n        templates: {\n          empty: emptyTemplate,\n          item: hitTemplate\n        },\n        transformData: {\n          item: Sherlock.transformHit\n        }\n      })\n    );\n  },\n  addPaginationWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.pagination({\n        container: '#pagination',\n        cssClasses: {\n          active: 'active'\n        },\n        labels: {\n          previous: '<i class=\"fa fa-angle-left fa-2x\"></i> Previous page',\n          next: 'Next page <i class=\"fa fa-angle-right fa-2x\"></i>'\n        },\n        showFirstLast: false\n      })\n    );\n  }\n};\n\nexport default Sherlock;\n"]}